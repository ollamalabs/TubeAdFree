"use strict";const timeout=(e="",t="",r="")=>{if("string"!=typeof e)return;const n=safeSelf().patternToRegex(e);let s="*"!==t?parseInt(t,10):-1;!isNaN(s)&&isFinite(s)||(s=1e3);let o=parseFloat(r);o=!isNaN(o)&&isFinite(o)?Math.min(Math.max(o,.001),50):.05,self.setTimeout=new Proxy(self.setTimeout,{apply(e,t,r){const[c,a]=r;return-1!==s&&a!==s||!n.test(c.toString())||(r[1]=a*o),e.apply(t,r)}})},generateExceptionToken=()=>{const e=safeSelf(),t=String.fromCharCode(Date.now()%26+97)+e.Math_floor(982451653*e.Math_random()+982451653).toString(36),r=globalThis.onerror;return globalThis.onerror=(e,...n)=>!("string"!=typeof e||!e.includes(t))||r?.call(this,e,...n),t};function JPXR(e="",t="",...r){const n=safeSelf(),s=new WeakMap,o=n.getExtraArgs(r,2),c=createPropertyMatchMap(o.propsToMatch,"url"),a=n.initPattern(o.stackToMatch||"",{canNegate:!0});self.XMLHttpRequest=class extends self.XMLHttpRequest{open(e,t){const r={method:e,url:t};let n="match";0===c.size||doesObjectMatchProperties(c,r)||(n="nomatch"),"match"===n&&s.set(this,r),super.open(e,t)}get response(){const r=super.response,o=s.get(this);if(!o)return r;const c="string"==typeof r?r.length:void 0;if(o.lastResponseLength!==c&&(o.response=void 0,o.lastResponseLength=c),void 0!==o.response)return o.response;let i;if("object"==typeof r)i=r;else if("string"==typeof r)try{i=n.JSON_parse(r)}catch(e){}if("object"!=typeof i)return o.response=r,r;const f=pruneObject(i,e,t,a);return o.response="object"==typeof f?"string"==typeof r?n.JSON_stringify(f):f:r,o.response}get responseText(){const{response:e}=this;return"string"!=typeof e?super.responseText:e}}}const doesObjectMatchProperties=(e,...t)=>{const r=doesObjectMatchProperties;void 0===r.extractProperties&&(r.extractProperties=(e,t,r)=>{for(const n of r)void 0!==e[n]&&(t[n]=e[n])});const n=safeSelf(),s={},o=n.Array_from(e.keys());for(const e of t)e instanceof Object!=0&&r.extractProperties(e,s,o);for(const[t,r]of e){let o=s[t];if(void 0!==o){if("string"!=typeof o){try{o=n.JSON_stringify(o)}catch(e){}if("string"!=typeof o)continue}if(!n.testPattern(r,o))return!1}}return!0},matchesStackTrace=e=>{const t=safeSelf(),r=generateExceptionToken(),n=new t.Error(r),s=new URL(self.location.href);s.hash="";const o=[];for(let e of n.stack?.split(/[\n\r]+/)??[]){if(e.includes(r))continue;e=e.trim();const n=t.RegExp_exec.call(/(.*?@)?(\S+)(:\d+):\d+\)?$/,e);if(null===n)continue;let c=n[2];c.startsWith("(")&&(c=c.slice(1)),c===s.href?c="inlineScript":c.startsWith("<anonymous>")&&(c="injectedScript");let a=void 0!==n[1]?n[1].slice(0,-1):e.slice(0,n.index).trim();a.startsWith("at")&&(a=a.slice(2).trim());const i=n[3];o.push(` ${`${a} ${c}${i}:1`.trim()}`)}o[0]="stackDepth:"+(o.length-1);const c=o.join("\t");return!0!==e.matchAll&&t.testPattern(e.pattern,c)},findObjectOwner=(e,t,r=!1)=>{let n=e,s=t;for(;;){if("object"!=typeof n||null===n)return!1;const e=s.indexOf(".");if(-1===e){if(!r)return Object.prototype.hasOwnProperty.call(n,s);let e=!1;if("*"===s)for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(delete n[t],e=!0);else Object.prototype.hasOwnProperty.call(n,s)&&(delete n[s],e=!0);return e}const t=s.slice(0,e),o=s.slice(e+1);let c=!1;if("[-]"===t&&Array.isArray(n)){let e=n.length;for(;e--;)findObjectOwner(n[e],o)&&(n.splice(e,1),c=!0);return c}if("{-}"===t&&n instanceof Object){for(const e of Object.keys(n))findObjectOwner(n[e],o)&&(delete n[e],c=!0);return c}if("[]"===t&&Array.isArray(n)||"{}"===t&&n instanceof Object||"*"===t&&n instanceof Object){for(const e of Object.keys(n))findObjectOwner(n[e],o,r)&&(c=!0);return c}if(!Object.prototype.hasOwnProperty.call(n,t))return!1;n=n[t],s=s.slice(e+1)}},pruneObject=(e,t,r,n)=>{const s=pruneObject,o=""!==t?t.split(/ +/):[],c=0!==o.length&&""!==r?r.split(/ +/):[];if(!n.matchAll&&!matchesStackTrace(n))return;if(void 0===s.mustProcess&&(s.mustProcess=(e,t)=>{for(const r of t)if(!findObjectOwner(e,r))return!1;return!0}),0===o.length)return;let a="nomatch";if(s.mustProcess(e,c))for(const t of o)findObjectOwner(e,t,!0)&&(a="match");return"match"===a?e:void 0},createPropertyMatchMap=(e,t="")=>{const r=safeSelf(),n=new Map;if(!e)return n;const s={canNegate:!0};for(const o of e.split(/\s+/)){const[e,c]=o.split(":");e&&(void 0!==c?n.set(e,r.initPattern(c,s)):t&&n.set(t,r.initPattern(e,s)))}return n},RFRC=(e="",t="",r="",...n)=>{const s=safeSelf();"*"===e&&(e=".*");const o=s.patternToRegex(e),c=createPropertyMatchMap(r,"url"),a=s.getExtraArgs(Array.from(n),4),i=a.includes?s.patternToRegex(a.includes):null;self.fetch=new Proxy(self.fetch,{apply(r,n,a){const f=Reflect.apply(r,n,a);if(""===e)return f;let l="match";if(0!==c.size){const e=[a[0]instanceof Object?a[0]:{url:a[0]}];if(e[0]instanceof Request)try{e[0]=s.Request_clone.call(e[0])}catch(e){}a[1]instanceof Object&&e.push(a[1]),doesObjectMatchProperties(c,...e)||(l="nomatch")}return"nomatch"===l?f:f.then(e=>e.clone().text().then(r=>{if(i&&!1===i.test(r))return e;const n=r.replace(o,t);if("nomatch"==(n!==r?"match":"nomatch"))return e;const s=new Response(n,{status:e.status,statusText:e.statusText,headers:e.headers});return Object.defineProperties(s,{ok:{value:e.ok},redirected:{value:e.redirected},type:{value:e.type},url:{value:e.url}}),s}).catch(()=>e)).catch(()=>f)}})};function RXRC(e="",t="",r="",...n){const s=safeSelf(),o=new WeakMap;"*"===e&&(e=".*");const c=s.patternToRegex(e),a=createPropertyMatchMap(r,"url"),i=s.getExtraArgs(Array.from(n),3),f=i.includes?s.patternToRegex(i.includes):null;self.XMLHttpRequest=class extends self.XMLHttpRequest{open(e,t){const r={method:e,url:t};let n="match";return 0!==a.size&&(doesObjectMatchProperties(a,r)||(n="nomatch")),"match"===n&&o.set(this,r),super.open(e,t)}get response(){const e=super.response,r=o.get(this);if(void 0===r)return e;const n="string"==typeof e?e.length:void 0;if(r.lastResponseLength!==n&&(r.response=void 0,r.lastResponseLength=n),void 0!==r.response)return r.response;if("string"!=typeof e)return r.response=e,e;if(f&&!1===f.test(e))return r.response=e,e;const s=e.replace(c,t);return r.response=s,s}get responseText(){const{response:e}=this;return"string"!=typeof e?super.responseText:e}}}const scheduleExecution=(e,t)=>{const r=e=>{const r=Array.isArray(e)?e:[e];for(const e of r){const r=`${e}`;if(void 0!==t[r])return t[r]}return 0},n=r(t),s=()=>{r(document.readyState)>=n&&(e(),safeSelf().removeEventListener("readystatechange",s,!0))};r(document.readyState)>=n?e():safeSelf().addEventListener("readystatechange",s,{capture:!0})};function DC(e="",t="",...r){if(""===e)return;const n=safeSelf(),s=n.getExtraArgs([e,t,...r],3);scheduleExecution(()=>{!(function(e,t){const r=(()=>{const t=e.lastIndexOf(".");return-1===t?e:e.slice(t+1)})();if(""===r)return;const s=document.currentScript;let o=getValidatedConstant(!0,t);var c;"noopFunc"!==t&&"trueFunc"!==t&&"falseFunc"!==t||(c=o,n.Object_defineProperty(c,"name",{value:r}),o=new Proxy(c,{defineProperty:(e,t,...r)=>"toString"===t||Reflect.defineProperty(e,t,...r),deleteProperty:(e,t)=>"toString"===t||Reflect.deleteProperty(e,t),get:(e,t,...n)=>"toString"===t?()=>`function ${r}() { [native code] }`:Reflect.get(e,t,...n)}));let a=!1;const i=e=>!!a||(a=null!=e&&null!=o&&typeof e!=typeof o,a),f=(e,t,r,s)=>{if(!s.init(r?e[t]:o))return;const c=n.Object_getOwnPropertyDescriptor(e,t);let a,i;c instanceof Object&&(e[t]=o,c.get instanceof Function&&(a=c.get),c.set instanceof Function&&(i=c.set));try{n.Object_defineProperty(e,t,{configurable:r,get:()=>a?a():s.getter(),set(e){i&&i(e),s.setter(e)}})}catch(e){}},l=(e,t)=>{const r=t.indexOf(".");if(-1===r)return void f(e,t,!1,{value:void 0,init(e){return!i(e)&&(this.value=e,!0)},getter(){return document.currentScript===s?this.value:o},setter(e){i(e)&&(o=e)}});const n=t.slice(0,r),c=e[n];t=t.slice(r+1),c instanceof Object||"object"==typeof c&&null!==c?l(c,t):f(e,n,!0,{value:void 0,init(e){return this.value=e,!0},getter(){return this.value},setter(e){this.value=e,e instanceof Object&&l(e,t)}})};l(window,e)})(e,t)},s.runAt??"")}const getValidatedConstant=(e,t,...r)=>{const n=safeSelf(),s=n.getExtraArgs(r,0);let o;switch(t){case"undefined":o=void 0;break;case"false":o=!1;break;case"true":o=!0;break;case"null":o=null;break;case"''":case"":o="";break;case"[]":case"emptyArr":o=[];break;case"{}":case"emptyObj":o={};break;case"noopFunc":o=function(){};break;case"trueFunc":o=function(){return!0};break;case"falseFunc":o=function(){return!1};break;default:if(/^-?\d+$/.test(t)){if(o=parseInt(t,10),isNaN(o)||Math.abs(o)>32767)return}else{if(!(e&&t.startsWith("{")&&t.endsWith("}")))return;try{o=n.JSON_parse(t).value}catch(e){return}}}if(void 0!==s.as)switch(s.as){case"function":return()=>o;case"callback":return()=>()=>o;case"resolved":return Promise.resolve(o);case"rejected":return Promise.reject(o)}return o};